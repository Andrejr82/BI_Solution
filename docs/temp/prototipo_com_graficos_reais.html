<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agent BI - Interface com Gr√°ficos REAIS</title>

    <!-- Plotly.js para gr√°ficos interativos -->
    <script src="https://cdn.plot.ly/plotly-2.26.0.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #343541;
            color: #ececf1;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: #202123;
            padding: 12px 24px;
            border-bottom: 1px solid #444654;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .header h1 {
            font-size: 18px;
            font-weight: 600;
            color: #ececf1;
        }

        .chat-container {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            scroll-behavior: smooth;
        }

        .message {
            display: flex;
            gap: 16px;
            padding: 24px 0;
            max-width: 900px;
            margin: 0 auto;
        }

        .message.assistant-message {
            background: #444654;
            margin-left: -24px;
            margin-right: -24px;
            padding-left: calc((100vw - 900px) / 2 + 24px);
            padding-right: calc((100vw - 900px) / 2 + 24px);
        }

        @media (max-width: 948px) {
            .message.assistant-message {
                padding-left: 24px;
                padding-right: 24px;
            }
        }

        .avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
        }

        .user-avatar {
            background: #10a37f;
        }

        .assistant-avatar {
            background: #5436DA;
        }

        .message-content {
            flex: 1;
            line-height: 1.6;
        }

        /* GR√ÅFICO PLOTLY - Full width */
        .chart-container {
            background: #2a2b32;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3);
        }

        .chart-title {
            color: #ececf1;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        /* TABELA */
        .table-container {
            background: #2a2b32;
            border-radius: 12px;
            padding: 20px;
            margin: 16px 0;
            overflow-x: auto;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            color: #ececf1;
        }

        th {
            background: #40414f;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            border-bottom: 2px solid #10a37f;
        }

        td {
            padding: 10px 12px;
            border-bottom: 1px solid #444654;
        }

        tr:hover {
            background: rgba(16, 163, 127, 0.1);
        }

        .metric-card {
            background: #2a2b32;
            border-radius: 8px;
            padding: 16px;
            margin: 12px 0;
            border-left: 4px solid #10a37f;
        }

        .metric-label {
            color: #8e8ea0;
            font-size: 13px;
            margin-bottom: 4px;
        }

        .metric-value {
            color: #ececf1;
            font-size: 24px;
            font-weight: 600;
        }

        .suggestions {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-top: 16px;
        }

        .suggestion-btn {
            background: #2a2b32;
            border: 1px solid #444654;
            color: #ececf1;
            padding: 12px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s;
            text-align: left;
        }

        .suggestion-btn:hover {
            background: #40414f;
            border-color: #10a37f;
            transform: translateY(-2px);
        }

        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
            flex-wrap: wrap;
        }

        .action-btn {
            background: transparent;
            border: 1px solid #444654;
            color: #8e8ea0;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .action-btn:hover {
            background: #40414f;
            color: #ececf1;
            border-color: #10a37f;
        }

        .input-container {
            background: #343541;
            padding: 24px;
            border-top: 1px solid #444654;
        }

        .input-wrapper {
            max-width: 900px;
            margin: 0 auto;
            position: relative;
        }

        .chat-input {
            width: 100%;
            background: #40414f;
            border: 1px solid #444654;
            border-radius: 12px;
            padding: 16px 52px 16px 16px;
            color: #ececf1;
            font-size: 15px;
            font-family: inherit;
            resize: none;
            max-height: 200px;
            overflow-y: auto;
        }

        .chat-input:focus {
            outline: none;
            border-color: #10a37f;
            box-shadow: 0 0 0 3px rgba(16, 163, 127, 0.1);
        }

        .send-btn {
            position: absolute;
            right: 12px;
            bottom: 12px;
            background: #10a37f;
            border: none;
            border-radius: 8px;
            width: 36px;
            height: 36px;
            color: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .send-btn:hover {
            background: #0d8a6a;
            transform: scale(1.05);
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #343541;
        }

        ::-webkit-scrollbar-thumb {
            background: #565869;
            border-radius: 4px;
        }

        .badge {
            display: inline-block;
            background: #10a37f;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 8px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>ü§ñ Agent BI - Business Intelligence</h1>
        <div style="color: #8e8ea0; font-size: 14px;">
            <span class="badge">100% IA</span>
        </div>
    </div>

    <div class="chat-container" id="chatContainer">
        <!-- Mensagem 1: Usu√°rio -->
        <div class="message user-message">
            <div class="avatar user-avatar">üë§</div>
            <div class="message-content">
                <p>Mostre o ranking de vendas dos top 5 segmentos nos √∫ltimos 30 dias</p>
            </div>
        </div>

        <!-- Mensagem 2: Assistente com GR√ÅFICO REAL -->
        <div class="message assistant-message">
            <div class="avatar assistant-avatar">ü§ñ</div>
            <div class="message-content">
                <p>üìä Aqui est√° o ranking de vendas dos <strong>Top 5 segmentos</strong> nos √∫ltimos 30 dias:</p>

                <!-- GR√ÅFICO PLOTLY INTERATIVO -->
                <div class="chart-container">
                    <div class="chart-title">Ranking de Vendas por Segmento (√öltimos 30 Dias)</div>
                    <div id="chart1" style="width: 100%; height: 400px;"></div>
                </div>

                <!-- TABELA DE DADOS -->
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Segmento</th>
                                <th>Vendas (R$)</th>
                                <th>% do Total</th>
                                <th>Tend√™ncia</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>1¬∫</td>
                                <td>TECIDOS</td>
                                <td>R$ 1.234.567,89</td>
                                <td>28%</td>
                                <td style="color: #10a37f;">‚ñ≤ +15%</td>
                            </tr>
                            <tr>
                                <td>2¬∫</td>
                                <td>PAPELARIA</td>
                                <td>R$ 987.654,32</td>
                                <td>22%</td>
                                <td style="color: #10a37f;">‚ñ≤ +8%</td>
                            </tr>
                            <tr>
                                <td>3¬∫</td>
                                <td>ARMARINHO</td>
                                <td>R$ 765.432,10</td>
                                <td>17%</td>
                                <td style="color: #fbbf24;">‚ñ† 0%</td>
                            </tr>
                            <tr>
                                <td>4¬∫</td>
                                <td>CASA E DECORA√á√ÉO</td>
                                <td>R$ 543.210,98</td>
                                <td>12%</td>
                                <td style="color: #ef4444;">‚ñº -5%</td>
                            </tr>
                            <tr>
                                <td>5¬∫</td>
                                <td>FESTAS</td>
                                <td>R$ 432.109,87</td>
                                <td>10%</td>
                                <td style="color: #10a37f;">‚ñ≤ +12%</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- INSIGHTS -->
                <div class="metric-card">
                    <div class="metric-label">üí° Principal Insight</div>
                    <div class="metric-value" style="font-size: 16px; margin-top: 8px;">
                        Top 3 segmentos representam <strong style="color: #10a37f;">67%</strong> do total de vendas
                    </div>
                </div>

                <!-- Bot√µes de A√ß√£o -->
                <div class="action-buttons">
                    <button class="action-btn">üìã Copiar dados</button>
                    <button class="action-btn">üíæ Exportar Excel</button>
                    <button class="action-btn">üìä Gr√°fico pizza</button>
                    <button class="action-btn">üìà Ver evolu√ß√£o</button>
                </div>

                <!-- Sugest√µes -->
                <p style="margin-top: 24px; color: #8e8ea0; font-size: 14px;">
                    <strong>üí° Perguntas relacionadas:</strong>
                </p>
                <div class="suggestions">
                    <button class="suggestion-btn">üí¨ Evolu√ß√£o mensal de TECIDOS</button>
                    <button class="suggestion-btn">üí¨ Produtos mais vendidos em cada segmento</button>
                    <button class="suggestion-btn">üí¨ Comparar com ano passado</button>
                    <button class="suggestion-btn">üí¨ An√°lise de sazonalidade</button>
                </div>
            </div>
        </div>

        <!-- Mensagem 3: Usu√°rio -->
        <div class="message user-message">
            <div class="avatar user-avatar">üë§</div>
            <div class="message-content">
                <p>Mostre a evolu√ß√£o mensal de TECIDOS nos √∫ltimos 6 meses</p>
            </div>
        </div>

        <!-- Mensagem 4: Assistente com GR√ÅFICO DE LINHA -->
        <div class="message assistant-message">
            <div class="avatar assistant-avatar">ü§ñ</div>
            <div class="message-content">
                <p>üìà Aqui est√° a <strong>evolu√ß√£o de vendas do segmento TECIDOS</strong> nos √∫ltimos 6 meses:</p>

                <!-- GR√ÅFICO DE LINHA -->
                <div class="chart-container">
                    <div class="chart-title">Evolu√ß√£o de Vendas - TECIDOS (6 Meses)</div>
                    <div id="chart2" style="width: 100%; height: 400px;"></div>
                </div>

                <!-- M√âTRICAS -->
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; margin-top: 16px;">
                    <div class="metric-card">
                        <div class="metric-label">Crescimento M√©dio</div>
                        <div class="metric-value" style="color: #10a37f;">+12%</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Pico de Vendas</div>
                        <div class="metric-value">Junho</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Total 6 Meses</div>
                        <div class="metric-value">R$ 7.2M</div>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="action-btn">üìã Copiar dados</button>
                    <button class="action-btn">üíæ Exportar Excel</button>
                    <button class="action-btn">üìä Ver por categoria</button>
                </div>
            </div>
        </div>
    </div>

    <div class="input-container">
        <div class="input-wrapper">
            <textarea
                class="chat-input"
                placeholder="Fa√ßa sua pergunta sobre vendas, estoque, produtos..."
                rows="1"
            ></textarea>
            <button class="send-btn">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // GR√ÅFICO 1: Gr√°fico de Barras (igual seu Plotly atual!)
        const chart1Data = [{
            x: ['TECIDOS', 'PAPELARIA', 'ARMARINHO', 'CASA E DECORA√á√ÉO', 'FESTAS'],
            y: [1234567.89, 987654.32, 765432.10, 543210.98, 432109.87],
            type: 'bar',
            marker: {
                color: ['#10a37f', '#1a7f64', '#2d5f4f', '#40414f', '#5436DA'],
                line: {
                    width: 1,
                    color: '#ececf1'
                }
            },
            text: ['R$ 1.2M', 'R$ 987K', 'R$ 765K', 'R$ 543K', 'R$ 432K'],
            textposition: 'outside',
            hovertemplate: '<b>%{x}</b><br>Vendas: R$ %{y:,.2f}<extra></extra>'
        }];

        const chart1Layout = {
            title: '',
            plot_bgcolor: '#2a2b32',
            paper_bgcolor: '#2a2b32',
            font: {
                color: '#ececf1',
                family: 'Arial, sans-serif'
            },
            xaxis: {
                gridcolor: '#444654',
                tickangle: -45
            },
            yaxis: {
                gridcolor: '#444654',
                tickformat: ',.0f'
            },
            margin: { l: 60, r: 40, t: 40, b: 120 },
            hovermode: 'closest'
        };

        const chart1Config = {
            displayModeBar: true,
            displaylogo: false,
            responsive: true
        };

        Plotly.newPlot('chart1', chart1Data, chart1Layout, chart1Config);

        // GR√ÅFICO 2: Gr√°fico de Linha (evolu√ß√£o temporal)
        const chart2Data = [{
            x: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun'],
            y: [980000, 1050000, 1120000, 1180000, 1250000, 1340000],
            type: 'scatter',
            mode: 'lines+markers',
            line: {
                color: '#10a37f',
                width: 3
            },
            marker: {
                size: 10,
                color: '#10a37f',
                line: {
                    color: '#ececf1',
                    width: 2
                }
            },
            fill: 'tozeroy',
            fillcolor: 'rgba(16, 163, 127, 0.2)',
            hovertemplate: '<b>%{x}</b><br>Vendas: R$ %{y:,.0f}<extra></extra>'
        }];

        const chart2Layout = {
            plot_bgcolor: '#2a2b32',
            paper_bgcolor: '#2a2b32',
            font: {
                color: '#ececf1',
                family: 'Arial, sans-serif'
            },
            xaxis: {
                gridcolor: '#444654'
            },
            yaxis: {
                gridcolor: '#444654',
                tickformat: ',.0f'
            },
            margin: { l: 80, r: 40, t: 40, b: 60 },
            hovermode: 'x unified'
        };

        const chart2Config = {
            displayModeBar: true,
            displaylogo: false,
            responsive: true
        };

        Plotly.newPlot('chart2', chart2Data, chart2Layout, chart2Config);

        // Auto-scroll
        window.addEventListener('load', () => {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.scrollTop = chatContainer.scrollHeight;
        });
    </script>
</body>
</html>
