{
  "metadata": {
    "description": "Padrões de perguntas para treinamento automático do agente",
    "version": "3.1",
    "auto_learn": true,
    "total_patterns": 28,
    "last_updated": "2025-10-04",
    "coverage_target": "80 perguntas de negócio - Meta 96.25%"
  },
  "patterns": [
    {
      "id": "top_produtos_segmento_une",
      "name": "Top N produtos em segmento específico e UNE específica",
      "examples": [
        "quais são os 5 produtos mais vendidos no segmento tecidos na Une scr?",
        "top 10 produtos do segmento ARMARINHO na filial 261",
        "me mostre os 5 produtos mais vendidos em FESTAS na loja MAD",
        "produtos mais vendidos no segmento PAPELARIA na une TIJ"
      ],
      "regex": "(quais?\\s+(?:são|sao)?\\s+(?:os?\\s+)?|me\\s+mostre\\s+(?:os?\\s+)?)?(top\\s+)?(\\d+)?\\s*produtos\\s*(mais\\s*vendidos?)?\\s*(do|no|em|de)?\\s*segmento\\s+(\\w+)\\s+(?:da|na|em|para)?\\s+(une|filial|loja|unidade)\\s+([A-Z0-9]{2,})",
      "extract": {
        "limite": "group(3)",
        "segmento": "group(6)",
        "une_nome": "group(8)"
      },
      "query_type": "ranking_segmento_une",
      "output": "chart_bar"
    },
    {
      "id": "vendas_segmentos_une",
      "name": "Vendas por segmento em UNE específica",
      "examples": [
        "venda total de cada segmento da une 261",
        "vendas por segmento na une MAD",
        "total de vendas de cada segmento da filial 261",
        "quanto cada segmento vendeu na une 261",
        "vendas de todos os segmentos da une 261"
      ],
      "regex": "venda[s]?\\s*(total|totais)?\\s*(de\\s*)?(cada\\s*)?segmento[s]?\\s*(da|na)?\\s*(une|filial|loja|unidade)\\s*(\\d+|[A-Z]{3,})",
      "extract": {
        "une": "group(6)"
      },
      "query_type": "aggregation",
      "group_by": "nomesegmento",
      "filter": {
        "une": "{une}"
      },
      "aggregation": "SUM",
      "columns": ["mes_01", "mes_02", "mes_03", "mes_04", "mes_05", "mes_06", "mes_07", "mes_08", "mes_09", "mes_10", "mes_11", "mes_12"],
      "output": "chart_bar",
      "response_template": "Vendas por segmento na UNE {une}:\n{results}"
    },
    {
      "id": "top_produtos_une_especifica",
      "name": "Top N produtos em UNE específica",
      "examples": [
        "top 10 produtos da une 261",
        "10 produtos mais vendidos na une MAD",
        "quais os 5 produtos que mais vendem na une 261",
        "Quais são os 5 produtos mais vendidos na UNE SCR no último mês?",
        "me mostre os 10 produtos mais vendidos na filial SCR",
        "5 produtos que mais venderam na loja 261"
      ],
      "regex": "(quais?\\s+(?:são|sao)?\\s+(?:os?\\s+)?|me\\s+mostre\\s+(?:os?\\s+)?)?(top\\s+)?(\\d+)\\s*produtos\\s*(mais\\s*vendidos?|que\\s+mais\\s+vende[mr]am?)?\\s*(da|na|para|em)?\\s*(une|filial|loja|unidade)\\s*([A-Z0-9]{2,})",
      "extract": {
        "limite": "group(3)",
        "une_nome": "group(7)"
      },
      "query_type": "ranking",
      "filter": {
        "une": "{une_nome}"
      },
      "order_by": "vendas_total DESC",
      "limit": "{limite}",
      "output": "chart_bar"
    },
    {
      "id": "vendas_produto_une",
      "name": "Vendas de produto específico em UNE",
      "examples": [
        "vendas do produto 369947 na une SCR",
        "quanto vendeu o produto 369947 na filial MAD",
        "gráfico de vendas do produto 123456 na une 261",
        "mostre as vendas do produto 123456 na loja SCR"
      ],
      "regex": "(vendas?|gr[aá]fico|mostre|exiba).*produto\\s*(\\d{5,7}).*(une|filial|loja)\\s*([A-Z0-9]{2,})",
      "extract": {
        "produto": "group(2)",
        "une": "group(4)"
      },
      "query_type": "time_series",
      "filter": {
        "codigo": "{produto}",
        "une": "{une}"
      },
      "output": "chart_line"
    },
    {
      "id": "comparacao_segmentos",
      "name": "Comparação entre segmentos",
      "examples": [
        "compare vendas entre TECIDOS e ARMARINHO",
        "comparar segmento FESTAS vs PAPELARIA",
        "diferença de vendas entre TECIDOS e CONFECÇÃO"
      ],
      "regex": "compar[ae].*segmentos?\\s+([A-Z][A-ZÀ-Ü\\s]+?)\\s+(vs|e|entre)\\s+([A-Z][A-ZÀ-Ü\\s]+?)(?:\\s|$)",
      "extract": {
        "segmento1": "group(1)",
        "segmento2": "group(3)"
      },
      "query_type": "comparison",
      "output": "chart_bar"
    },
    {
      "id": "evolucao_mes_a_mes",
      "name": "Evolução mês a mês",
      "examples": [
        "evolução de vendas nos últimos 12 meses",
        "vendas mês a mês do produto 369947",
        "histórico mensal de vendas"
      ],
      "regex": "(evolu[çc][ãa]o|hist[óo]rico|m[eê]s\\s*a\\s*m[eê]s).*vendas?",
      "query_type": "time_series",
      "output": "chart_line"
    },
    {
      "id": "ranking_geral",
      "name": "Rankings gerais",
      "examples": [
        "ranking de vendas por UNE",
        "top 10 segmentos",
        "produtos mais vendidos geral",
        "ranking de filiais",
        "melhores lojas"
      ],
      "regex": "(ranking|top\\s*\\d+|melhores?).*(?:por\\s+)?(une[s]?|filiai[s]?|loja[s]?|segmento[s]?|produto[s]?)",
      "query_type": "ranking",
      "output": "table_or_chart"
    },
    {
      "id": "produto_mes_passado",
      "name": "Produtos mais vendidos no mês passado/anterior",
      "examples": [
        "produtos mais vendidos no mês passado",
        "top 10 produtos do mês anterior",
        "quais produtos venderam mais no último mês"
      ],
      "regex": "(produtos?|top\\s*\\d*).*(?:mais\\s+vendidos?|que\\s+mais\\s+vende[mr]am?).*(m[êe]s\\s+(?:passado|anterior|[úu]ltimo)|[úu]ltimo\\s+m[êe]s)",
      "extract": {
        "periodo": "ultimo_mes"
      },
      "query_type": "ranking",
      "output": "chart_bar"
    },
    {
      "id": "produto_por_extenso",
      "name": "Números por extenso",
      "examples": [
        "cinco produtos mais vendidos",
        "dez melhores produtos",
        "três segmentos principais"
      ],
      "regex": "(cinco|dez|tr[êe]s|vinte|quinze|cem)\\s+(produtos?|segmentos?|filiai[s]?|lojas?)",
      "extract": {
        "numero_extenso": "group(1)"
      },
      "query_type": "ranking"
    },
    {
      "id": "analise_abc",
      "name": "Análise ABC de produtos",
      "examples": [
        "produtos ABC A",
        "análise ABC: distribuição de produtos",
        "produtos classificados como ABC A",
        "produtos ABC C com potencial"
      ],
      "regex": "(produtos?|an[aá]lise)\\s*(abc|classificad[oa]s?.*abc)\\s*([abc])?",
      "extract": {
        "classe_abc": "group(3)"
      },
      "query_type": "abc_analysis",
      "output": "table_or_chart"
    },
    {
      "id": "produtos_sem_movimento",
      "name": "Produtos sem movimento ou parados",
      "examples": [
        "produtos sem movimento",
        "produtos parados",
        "produtos que não venderam",
        "produtos sem vendas"
      ],
      "regex": "produtos?\\s*(sem|parados?|que\\s+n[aã]o)\\s*(movimento|venda[s]?|venderam)",
      "query_type": "produtos_sem_movimento",
      "output": "table"
    },
    {
      "id": "estoque_alto",
      "name": "Produtos com excesso de estoque",
      "examples": [
        "produtos com excesso de estoque",
        "estoque alto",
        "produtos com muito estoque",
        "identificar produtos com excesso de estoque"
      ],
      "regex": "(produtos?\\s*(com)?\\s*)?(excesso|muito|alto)\\s*(de\\s*)?estoque",
      "query_type": "estoque_excesso",
      "output": "table"
    },
    {
      "id": "estoque_baixo",
      "name": "Produtos com estoque baixo",
      "examples": [
        "produtos com estoque baixo",
        "estoque baixo",
        "produtos com pouco estoque",
        "produtos com estoque baixo vs alta demanda"
      ],
      "regex": "(produtos?\\s*(com)?\\s*)?(baixo|pouco|m[íi]nimo)\\s*(de\\s*)?estoque",
      "query_type": "estoque_baixo",
      "output": "table"
    },
    {
      "id": "rotacao_estoque",
      "name": "Análise de rotação de estoque",
      "examples": [
        "produtos com maior rotação de estoque",
        "rotação de estoque",
        "produtos de alta rotação"
      ],
      "regex": "(produtos?\\s*(com)?\\s*)?(maior|alta|melhor)?\\s*rota[çc][ãa]o\\s*(de\\s*)?estoque",
      "query_type": "rotacao_estoque_avancada",
      "output": "table_or_chart"
    },
    {
      "id": "tendencia_vendas",
      "name": "Tendência de vendas",
      "examples": [
        "tendência de vendas",
        "tendência de vendas dos últimos 6 meses",
        "produtos com tendência decrescente",
        "análise de tendência"
      ],
      "regex": "(tend[eê]ncia|evolu[çc][ãa]o).*vendas?.*([úu]ltimos?\\s*\\d+\\s*(meses?|dias?))?",
      "query_type": "tendencia_vendas",
      "output": "chart_line"
    },
    {
      "id": "sazonalidade",
      "name": "Análise de sazonalidade",
      "examples": [
        "análise de sazonalidade",
        "sazonalidade no segmento FESTAS",
        "quais meses vendem mais",
        "produtos com padrão sazonal"
      ],
      "regex": "(an[aá]lise\\s*(de\\s*)?)?sazonalidade|quais\\s*meses?\\s*vende[mr]?\\s*mais|padr[ãa]o\\s*sazonal",
      "query_type": "sazonalidade",
      "output": "chart_line"
    },
    {
      "id": "crescimento_segmento",
      "name": "Crescimento por segmento",
      "examples": [
        "qual segmento teve maior crescimento",
        "crescimento dos segmentos",
        "segmento com mais crescimento"
      ],
      "regex": "(qual|quais)?\\s*segmentos?\\s*(teve[mr]?|com)\\s*(maior|mais|melhor)?\\s*crescimento",
      "query_type": "crescimento_segmento",
      "output": "chart_bar"
    },
    {
      "id": "ranking_fabricantes",
      "name": "Ranking de fabricantes",
      "examples": [
        "ranking de fabricantes",
        "fabricantes com maior volume",
        "quais fabricantes vendem mais"
      ],
      "regex": "(ranking|quais)\\s*(de\\s*)?fabricantes?|(fabricantes?.*maior|fabricantes?.*vendem\\s*mais)",
      "query_type": "ranking_fabricantes",
      "output": "chart_bar"
    },
    {
      "id": "performance_categoria",
      "name": "Performance por categoria",
      "examples": [
        "performance por categoria",
        "categorias que mais vendem",
        "performance por categoria no segmento ARMARINHO"
      ],
      "regex": "performance\\s*(por|de)\\s*categor(ia|ias)|categorias?\\s*(que\\s*)?(mais\\s*)?vende[mr]?",
      "query_type": "performance_categoria",
      "output": "chart_bar"
    },
    {
      "id": "pico_vendas",
      "name": "Produtos com pico de vendas",
      "examples": [
        "produtos que tiveram pico",
        "pico de vendas no último mês",
        "quais produtos tiveram pico"
      ],
      "regex": "(produtos?|quais).*pico.*vendas?|pico\\s*(de\\s*)?vendas?",
      "query_type": "pico_vendas",
      "output": "table_or_chart"
    },
    {
      "id": "comparativo_unes_similares",
      "name": "Comparativo de eficiência entre UNEs similares",
      "examples": [
        "comparativo de eficiência de vendas entre UNEs similares",
        "eficiência entre UNEs",
        "compare UNEs similares"
      ],
      "regex": "(comparativ[oa]|efici[êe]ncia|compar[ae]).*unes?\\s*(similares?|efici[êe]ncia)",
      "query_type": "comparativo_unes_similares",
      "output": "chart_bar"
    },
    {
      "id": "fabricantes_novos_vs_estabelecidos",
      "name": "Fabricantes novos vs estabelecidos",
      "examples": [
        "novos fabricantes vs estabelecidos",
        "fabricantes novos vs estabelecidos: performance comparativa",
        "compare fabricantes novos e estabelecidos"
      ],
      "regex": "(novos?\\s*fabricantes?.*estabelecidos?|fabricantes?.*novos?.*vs.*estabelecidos?|fabricantes?.*estabelecidos?.*vs.*novos?)",
      "query_type": "fabricantes_novos_vs_estabelecidos",
      "output": "comparison"
    },
    {
      "id": "fabricantes_exclusivos_multimarca",
      "name": "Fabricantes exclusivos vs multimarca",
      "examples": [
        "fabricantes exclusivos vs multimarca por UNE",
        "compare fabricantes exclusivos e multimarca",
        "fabricantes exclusivos de uma UNE vs presentes em várias"
      ],
      "regex": "fabricantes?\\s*(exclusivos?.*multimarca|multimarca.*exclusivos?)|exclusivos?.*vs.*multimarca",
      "query_type": "fabricantes_exclusivos_multimarca",
      "output": "comparison"
    },
    {
      "id": "ciclo_vendas_consistente",
      "name": "Produtos com ciclo de vendas consistente vs irregular",
      "examples": [
        "produtos com ciclo de vendas consistente vs irregular",
        "vendas regulares vs esporádicas",
        "produtos com padrão regular de vendas"
      ],
      "regex": "(ciclo.*vendas?.*consistente|vendas?.*regular.*vs.*espor[áa]dic|consistente.*vs.*irregular|padr[ãa]o.*regular)",
      "query_type": "ciclo_vendas_consistente",
      "output": "comparison"
    },
    {
      "id": "estoque_baixo_alta_demanda",
      "name": "Produtos com estoque baixo vs alta demanda",
      "examples": [
        "produtos com estoque baixo vs alta demanda",
        "estoque baixo e muita venda",
        "produtos em risco de ruptura"
      ],
      "regex": "(estoque.*baixo.*alta?\\s*demanda|estoque.*baixo.*venda|risco.*ruptura)",
      "query_type": "estoque_baixo_alta_demanda",
      "output": "table"
    },
    {
      "id": "leadtime_vs_performance",
      "name": "Leadtime vs performance de vendas",
      "examples": [
        "produtos com maior leadtime vs performance de vendas",
        "relação entre leadtime e vendas",
        "leadtime impacta nas vendas"
      ],
      "regex": "(leadtime.*performance|leadtime.*vendas?|maior\\s*leadtime)",
      "query_type": "leadtime_vs_performance",
      "output": "analysis"
    },
    {
      "id": "exposicao_vs_vendas",
      "name": "Exposição mínima vs vendas",
      "examples": [
        "análise de exposição: produtos com exposição mínima vs vendas",
        "exposição mínima mas vende bem",
        "produtos com pouca exposição e boas vendas"
      ],
      "regex": "(exposi[çc][ãa]o.*m[íi]nima.*vendas?|exposi[çc][ãa]o.*vendas?|an[áa]lise.*exposi[çc][ãa]o)",
      "query_type": "exposicao_vs_vendas",
      "output": "table"
    },
    {
      "id": "estoque_cd_vs_vendas",
      "name": "Eficiência logística: estoque CD vs vendas",
      "examples": [
        "eficiência logística: relação entre estoque CD vs vendas",
        "estoque no CD vs vendas",
        "análise de estoque CD"
      ],
      "regex": "(efici[êe]ncia.*log[íi]stica|estoque.*cd.*vendas?|rela[çc][ãa]o.*estoque.*cd)",
      "query_type": "estoque_cd_vs_vendas",
      "output": "analysis"
    }
  ],
  "fallback_strategy": {
    "when_no_match": "use_llm_graph",
    "confidence_threshold": 0.7,
    "suggestion_on_fail": "Tente reformular sua pergunta ou veja exemplos disponíveis"
  }
}
